## 第五章 基本引用类型

```
本章内容
1.理解对象
2.基本JavaScript数据类型
3.原始值与原始值包装类型
```

#### 1.**原始值和引用值**

在 ECMAScript 中，变量可以存在两种类型的值，即**原始值**和**引用值**。

#### 1.1 **原始值**

(1).原始值指的是原始类型的值，也叫基本类型，例如 Number、Stirng、Boolean、Null、Underfined 。

(2).存储在**栈（stack）**中的简单数据段，也就是说，它们的值直接存储在**变量访问的位置**。

(3).注意:

 在许多语言中，字符串都被看作引用类型，而非原始类型，因为字符串的长度是可变的。ECMAScript 打破了这一传统。

#### 1.2**引用值**

（1）引用值指的是 **引用类型** 的值，例如 Object、Function、Array、Date、RegExp 。

（2）存储在**堆（heap）**中的对象，也就是说，存储在变量处的值是一个**指针**（point），指向存储**对象的内存处**。

#### 2.**栈和堆**

#### 2.1**原始值存储在栈中**

为变量赋值时，ECMAScript 的解释程序必须判断该值是原始类型，还是引用类型。要实现这一点，解释程序则需尝试判断该值是否为 ECMAScript 的**原始类型**之一，即 Undefined、Null、Boolean、Number 和 String 型。由于这些原始类型**占据的空间是固定的**，所以可将他们存储在较小的内存区域 - **栈中**。这样存储便于迅速查寻变量的值。

#### 2.2 **引用值存储在堆中**

如果一个值是**引用类型**的，那么它的存储空间将从**堆中**分配。由于引用值的**大小会改变**，所以不能把它放在栈中，否则会降低变量查寻的速度。相反，放在变量的栈空间中的值是该对象存储在堆中的地址。地址的大小是固定的，所以把它存储在栈中对变量性能无任何负面影响。

## 二.原始值包装类型

为了方便操作原始值，ECMAScript有3种特殊引用类型：

Boolean,Number和String.

每当用到某个原始值的方法或属性时，后台都会创建一个相应原始包装类型的对象，暴露出操作原始值的各种方法。

在以读模式访问字符串的方法或者属性时，总会在后台执行以下三步：
（1）创建一个原始值类型的实例
（2）调用这个实例上的方法（或读取这个实例上的属性）
（3）销毁这个实例

用代码表示出来则为：

```
let str = new String('I love China!');
console.log(str.slice(0,6));
str = null;
```

所以在非严格模式下，当我们尝试给原始值赋值时`str.age=18`，其实是生成了一个原始值包装类型的，也是给它赋了值的，但是，这句话执行完之后，这个原始值包装类型就被销毁了。而在下一次再次读取这个属性时`console.log(str.age)`，其实又再次创建了一个原始值包装类型对象，这个对象和之前那个不是一个对象，所以`str.age`为`undefined`



## 三 基本JavaScript数据类型

在JavaScript种一共有6种数据类型：Null、Undefined、Boolean、String、Number、Object。其中Object是一种复杂数据类型。

**基本数据类型：Null、Undefined、Boolean、String、Number。**

**引用数据类型：Object、Array、Date、RegExp。**

Date 类型提供关于日期和时间的信息，包括当前日期、时间及相关 计算。

 RegExp 类型是ECMAScript支持正则表达式的接口，提供了大多数基 础的和部分高级的正则表达式功能。

JavaScript中的对象称为引用值，几种内置的引用类型可用于创建特定 类型的对象。 引用值与传统面向对象编程语言中的类相似，但实现不同。